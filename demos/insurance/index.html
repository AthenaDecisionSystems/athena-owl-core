<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../../tutorials/dev_env/ rel=prev><link href=../miniloan/ rel=next><link rel=icon href=../../assets/owl.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.44"><title>IBU Insurance - Athena Decision Systems Product Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.0253249f.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#ibu-insurance class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Athena Decision Systems Product Documentation" class="md-header__button md-logo" aria-label="Athena Decision Systems Product Documentation" data-md-component=logo> <img src=../../assets/owl.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Athena Decision Systems Product Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> IBU Insurance </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/AthenaDecisionSystems/athena-owl-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Introduction </a> </li> <li class=md-tabs__item> <a href=../../arch/ class=md-tabs__link> Architecture </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Demos </a> </li> <li class=md-tabs__item> <a href=../../gen_ai_gs/ class=md-tabs__link> Gen AI to Hybrid AI </a> </li> <li class=md-tabs__item> <a href=../../tutorials/new_mistral_agent/ class=md-tabs__link> Tutorials </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Athena Decision Systems Product Documentation" class="md-nav__button md-logo" aria-label="Athena Decision Systems Product Documentation" data-md-component=logo> <img src=../../assets/owl.png alt=logo> </a> Athena Decision Systems Product Documentation </label> <div class=md-nav__source> <a href=https://github.com/AthenaDecisionSystems/athena-owl-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../arch/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../design/ class=md-nav__link> <span class=md-ellipsis> OwlAgent design </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Demos </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/dev_env/ class=md-nav__link> <span class=md-ellipsis> Environment Setup </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> IBU Insurance </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> IBU Insurance </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#goals class=md-nav__link> <span class=md-ellipsis> Goals </span> </a> </li> <li class=md-nav__item> <a href=#insurance-context class=md-nav__link> <span class=md-ellipsis> Insurance context </span> </a> </li> <li class=md-nav__item> <a href=#build-for-demonstration class=md-nav__link> <span class=md-ellipsis> Build for demonstration </span> </a> </li> <li class=md-nav__item> <a href=#run-locally class=md-nav__link> <span class=md-ellipsis> Run locally </span> </a> </li> <li class=md-nav__item> <a href=#demonstration-flows class=md-nav__link> <span class=md-ellipsis> Demonstration Flows </span> </a> <nav class=md-nav aria-label="Demonstration Flows"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#validate-the-demo-with-python-code class=md-nav__link> <span class=md-ellipsis> Validate the demo with python code </span> </a> </li> <li class=md-nav__item> <a href=#maintenance-activities-for-the-demonstration class=md-nav__link> <span class=md-ellipsis> Maintenance activities for the demonstration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#architecture class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#component-definitions class=md-nav__link> <span class=md-ellipsis> Component Definitions </span> </a> <nav class=md-nav aria-label="Component Definitions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#define-the-assistant class=md-nav__link> <span class=md-ellipsis> Define The Assistant </span> </a> </li> <li class=md-nav__item> <a href=#define-agents class=md-nav__link> <span class=md-ellipsis> Define Agents </span> </a> </li> <li class=md-nav__item> <a href=#define-tools class=md-nav__link> <span class=md-ellipsis> Define Tools </span> </a> </li> <li class=md-nav__item> <a href=#define-instructions class=md-nav__link> <span class=md-ellipsis> Define instructions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#development-activities class=md-nav__link> <span class=md-ellipsis> Development activities </span> </a> <nav class=md-nav aria-label="Development activities"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prepare-a-virtual-environment class=md-nav__link> <span class=md-ellipsis> Prepare a virtual environment </span> </a> </li> <li class=md-nav__item> <a href=#run-unit-tests class=md-nav__link> <span class=md-ellipsis> Run unit tests </span> </a> </li> <li class=md-nav__item> <a href=#debug-a-unit-tests class=md-nav__link> <span class=md-ellipsis> Debug a unit tests </span> </a> </li> <li class=md-nav__item> <a href=#physical-deployment-of-the-demonstration class=md-nav__link> <span class=md-ellipsis> Physical deployment of the demonstration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../miniloan/ class=md-nav__link> <span class=md-ellipsis> IBM-ODM LoanApp </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../gen_ai_gs/ class=md-nav__link> <span class=md-ellipsis> Gen AI to Hybrid AI </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/new_mistral_agent/ class=md-nav__link> <span class=md-ellipsis> Building New Mistral Agent </span> </a> </li> <li class=md-nav__item> <a href=../build_sol/ class=md-nav__link> <span class=md-ellipsis> Build Your Own Solution </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#goals class=md-nav__link> <span class=md-ellipsis> Goals </span> </a> </li> <li class=md-nav__item> <a href=#insurance-context class=md-nav__link> <span class=md-ellipsis> Insurance context </span> </a> </li> <li class=md-nav__item> <a href=#build-for-demonstration class=md-nav__link> <span class=md-ellipsis> Build for demonstration </span> </a> </li> <li class=md-nav__item> <a href=#run-locally class=md-nav__link> <span class=md-ellipsis> Run locally </span> </a> </li> <li class=md-nav__item> <a href=#demonstration-flows class=md-nav__link> <span class=md-ellipsis> Demonstration Flows </span> </a> <nav class=md-nav aria-label="Demonstration Flows"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#validate-the-demo-with-python-code class=md-nav__link> <span class=md-ellipsis> Validate the demo with python code </span> </a> </li> <li class=md-nav__item> <a href=#maintenance-activities-for-the-demonstration class=md-nav__link> <span class=md-ellipsis> Maintenance activities for the demonstration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#architecture class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#component-definitions class=md-nav__link> <span class=md-ellipsis> Component Definitions </span> </a> <nav class=md-nav aria-label="Component Definitions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#define-the-assistant class=md-nav__link> <span class=md-ellipsis> Define The Assistant </span> </a> </li> <li class=md-nav__item> <a href=#define-agents class=md-nav__link> <span class=md-ellipsis> Define Agents </span> </a> </li> <li class=md-nav__item> <a href=#define-tools class=md-nav__link> <span class=md-ellipsis> Define Tools </span> </a> </li> <li class=md-nav__item> <a href=#define-instructions class=md-nav__link> <span class=md-ellipsis> Define instructions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#development-activities class=md-nav__link> <span class=md-ellipsis> Development activities </span> </a> <nav class=md-nav aria-label="Development activities"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prepare-a-virtual-environment class=md-nav__link> <span class=md-ellipsis> Prepare a virtual environment </span> </a> </li> <li class=md-nav__item> <a href=#run-unit-tests class=md-nav__link> <span class=md-ellipsis> Run unit tests </span> </a> </li> <li class=md-nav__item> <a href=#debug-a-unit-tests class=md-nav__link> <span class=md-ellipsis> Debug a unit tests </span> </a> </li> <li class=md-nav__item> <a href=#physical-deployment-of-the-demonstration class=md-nav__link> <span class=md-ellipsis> Physical deployment of the demonstration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <div><h1 id=ibu-insurance>IBU Insurance<a class=headerlink href=#ibu-insurance title="Permanent link">Â¶</a></h1> <details class=info open=open> <summary>Version</summary> <p>Created 05/2024. Updated 07/11/2024 - STILL UNDER WORK</p> </details> <p>The IBU insurance demonstration illustrates the integration with data manager service, a decision service, a vector store and a LLM as shown in the figure below:</p> <p><img align=center alt src=../diagrams/insurance/ibu_ins_sys_ctx.drawio.png width=900></p> <div class="grid cards"> <ul> <li> <p><span class="twemoji lg middle"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M15 4a8 8 0 0 1 8 8 8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8m0 2a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6m-1 2h1.5v3.78l2.33 2.33-1.06 1.06L14 12.4zM2 18a1 1 0 0 1-1-1 1 1 0 0 1 1-1h3.83c.31.71.71 1.38 1.17 2zm1-5a1 1 0 0 1-1-1 1 1 0 0 1 1-1h2.05L5 12l.05 1zm1-5a1 1 0 0 1-1-1 1 1 0 0 1 1-1h3c-.46.62-.86 1.29-1.17 2z"></path></svg></span> <strong>Set up in 5 minutes</strong></p> <hr> <p>create a <code>.env</code> file under IBU-insurance-demo with the API key for the LLM you want to use. See the file template in <code>demo_tmpl/.env_tmpl</code>. Then cd IBU-insurance-demo/deployment/local &amp;&amp; docker-compose up -d </p> <p>and get up and running in minutes. </p> <p><a href=#demonstration-flows><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0"></path></svg></span> Demonstration Script</a></p> </li> <li> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 9h5.5L13 3.5zM6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m.12 13.5 3.74 3.74 1.42-1.41-2.33-2.33 2.33-2.33-1.42-1.41zm11.16 0-3.74-3.74-1.42 1.41 2.33 2.33-2.33 2.33 1.42 1.41z"></path></svg></span> <strong>Develop around this demo</strong></p> <hr> <p>Tune the content of this demonstration or deep dive into how it is built. <a href=#architecture><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0"></path></svg></span> Work on code</a></p> </li> <li> <p><span class="twemoji lg middle"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 3c-1.27 0-2.4.8-2.82 2H3v2h1.95L2 14c-.47 2 1 3 3.5 3s4.06-1 3.5-3L6.05 7h3.12c.33.85.98 1.5 1.83 1.83V20H2v2h20v-2h-9V8.82c.85-.32 1.5-.97 1.82-1.82h3.13L15 14c-.47 2 1 3 3.5 3s4.06-1 3.5-3l-2.95-7H21V5h-6.17C14.4 3.8 13.27 3 12 3m0 2a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1m-6.5 5.25L7 14H4zm13 0L20 14h-3z"></path></svg></span> <strong>Open Source, Apache</strong></p> <hr> <p>Owl Agent and demonstration are licensed under Apache and available on <a href=https://github.com/AthenaDecisionSystems/athena-owl-demos/blob/main/LICENSE>GitHub</a></p> <p><a href=#><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0"></path></svg></span> License</a></p> </li> </ul> </div> <h2 id=goals>Goals<a class=headerlink href=#goals title="Permanent link">Â¶</a></h2> <p>The IBU Insurance agent chatbot helps IBU Insuranceâ€™s customer service representatives manage customer complaints about their claims handling. The chatbot is used by the customer service reps when a customer calls or writes with a complaint.</p> <p>The chatbot should bring consistent responses and actionable decisions, which improves the complain management by more than 27% and improve the quality responses by 35% while reducing the cost by around 60%. </p> <p><a href="https://www.youtube.com/watch?v=fGEU_obHM5M" width=600><img alt="alt text" src=https://img.youtube.com/vi/fGEU_obHM5M/0.jpg></a></p> <p><a href="https://www.youtube.com/watch?v=fGEU_obHM5M">Link to video</a></p> <h2 id=insurance-context>Insurance context<a class=headerlink href=#insurance-context title="Permanent link">Â¶</a></h2> <p>In most insurance organization we may find the following roles Involved in Complaint Handling process:</p> <p><img alt src=../images/insurance/complaint-stakeholders.PNG></p> <p>The AI assistant will help the contact center agents.</p> <p>In the insurance industry the strategy to better manage customers is based on a metric called the Customer LifeTime Value or CLTV. The higher the value, the better will be the customer support, with some personalized service with dedicated advisor. At the lower range, the insurance may let their customers go away as it might actually reduce adverse selection and improve the overall profitability of the company. Finally for the bigger part of the customer profile, the company may want to retain them but using some retention effort at the minimum cost. </p> <p>As part of the automated chatbot integration the business policy may first evaluate the risk of churn and then reassign the interaction to the retention department if needed.</p> <h2 id=build-for-demonstration>Build for demonstration<a class=headerlink href=#build-for-demonstration title="Permanent link">Â¶</a></h2> <p>For development purpose, build the DataManager microservice image:</p> <div class="language-sh highlight"><span class=filename>Under the datamgt folder</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>./build/buildImage.sh
</span></code></pre></div> <p>The docker images for the DataManager microservice, the chatbot frontend and for the OWL Backend are available on docker hub.</p> <p><img alt src=../images/insurance/dock-hub-images.PNG></p> <p>The docker compose starts by downloading docker images from Docker Hub. Those images were built on intel based architecture. If you run on arm architecture like the MAC M family, you need to build the owl backend and owl front end images (<a href=https://athenadecisionsystems.github.io/athena-owl-core/design/#pre-requisites>See the instructions here</a>). </p> <h2 id=run-locally>Run locally<a class=headerlink href=#run-locally title="Permanent link">Â¶</a></h2> <ul> <li>Get a the API keys for the different LLM you want to use in your solution: WatsonX.AI , OpenAI Anthropic, Mistral, ... and use the <code>/demo_tmpl/.env_tmpl</code> file to persist those API KEYS, rename the file as <code>.env</code> and move it the miniloan demonstration folder.</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1># under IBU-insurance-demo</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>cp<span class=w> </span>../demo_tmpl/.env_tmpl<span class=w> </span>.env
</span></code></pre></div> <p>To start all the components of the solution like the owl_backend, the owl_frontend, the data manager, postgresql database, and the ODM decision service, use the docker compose file locally under the <code>IBU-insurance-demo/deployment/local/</code> folder. </p> <ul> <li>Start all the services:</li> </ul> <div class="language-sh highlight"><span class=filename>IBU-insurance-demo/deployment/local/ folder.</span><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>docker-compose<span class=w> </span>up<span class=w> </span>-d<span class=w> </span>
</span></code></pre></div> <p>The first time you launch it, it may take some time as it downloads the needed docker images from docker hub.</p> <ul> <li>Verify that the six containers are running:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>docker<span class=w> </span>ps
</span></code></pre></div> <div class="language-text highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>2ecb23b78ad5   jbcodeforce/ibu-insurance-data-mgr:latest  0.0.0.0:8080-&gt;8080/tcp, 8443/tcp         datamgr
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>3988ffd617c6   jbcodeforce/athena-owl-backend:latest      0.0.0.0:8000-&gt;8000/tcp                   owl-backend
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>258460ed25ed   jbcodeforce/athena-owl-frontend:latest      0.0.0.0:3000-&gt;80/tcp                   owl-frontend
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>349f3beb4174   icr.io/cpopen/odm-k8s/odm:8.12             0.0.0.0:9060-&gt;9060/tcp, 9080/tcp, 0.0.0.0:9443-&gt;9443/tcp, 9453/tcp   decisionsvc
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>070e124923f7   postgres:latest                            0.0.0.0:5432-&gt;5432/tcp                   postgres
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>86052092cfe7   ghcr.io/chroma-core/chroma:latest          0.0.0.0:8005-&gt;8000/tcp                   chroma-db
</span></code></pre></div> <ul> <li>To look at the <em>owl-backend</em> logs</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>docker<span class=w> </span>logs<span class=w> </span>owl-backend
</span></code></pre></div> <p>Next see the demonstration script section below, or the non-regression tests to validate automatically the demonstration scenario execution.</p> <h2 id=demonstration-flows>Demonstration Flows<a class=headerlink href=#demonstration-flows title="Permanent link">Â¶</a></h2> <p>The business policies are declared in a semi-structured <a href=https://github.com/AthenaDecisionSystems/athena-owl-demos/blob/main/IBU-insurance-demo/scenarios/IBU_policies_2.md>document</a>, and were extracted using the "<a href=https://link.springer.com/book/10.1007/978-3-642-19041-4>Agile Business Rule Development Methodology</a>". An extract of this document is shown in the figure below:</p> <p><img alt src=../images/insurance/policies_doc.PNG></p> <ul> <li>The business policy 52 is implemented in IBM ODM as the following rule:</li> </ul> <p><img alt src=../images/insurance/voucher_rule.PNG width=900></p> <p>Which is visible in the Decision Center at the address <a href=http://localhost:9060/decisioncenter/login>http://localhost:9060/decisioncenter</a>.</p> <ul> <li>Now to illustrate that using the policy document as input for a Retrieval Augmented Generation will provide limited value to customer support staff's query, you can use the OWL Frontend user's interface at <a href=http://localhost:3000/ >http://localhost:3000/</a>:</li> </ul> <p><img alt src=../images/insurance/upload_policy_doc.PNG></p> <p><strong>[Optional]</strong>: Once the document is uploaded, you can use the OWL_backend APIs to do a some similarity searches on the document content. The URL for the APIs is <a href=http://localhost:8000/docs>http://localhost:8000/docs</a>, while the API for similarity search is in the documents RESTful resource .</p> <ul> <li>Using the following query: "" we can see that the LLM with or without RAG does not give the real answer, and also at different time, it returns different answer</li> </ul> <p><img alt src=../images/insurance/sonya_carpet_no_odm.PNG></p> <ul> <li>Setting the flag to use ODM, give the result according to the rules:</li> </ul> <p><img alt src=../images/insurance/sonya_carpet_odm.PNG></p> <h3 id=validate-the-demo-with-python-code>Validate the demo with python code<a class=headerlink href=#validate-the-demo-with-python-code title="Permanent link">Â¶</a></h3> <p>Under the <code>e2e</code> folder you can find different tools to support automatic testing:</p> <ul> <li>Create python virtual environment if not created before:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>python<span class=w> </span>-m<span class=w> </span>venv<span class=w> </span>.venv
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=c1># for MAC / Linux users</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=nb>source</span><span class=w> </span>./venv/bin/activate
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=c1># for Windows</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=nb>source</span><span class=w> </span>./venv/Scripts/activate
</span></code></pre></div> <ul> <li>Install needed library to run those tests</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nb>cd</span><span class=w> </span>e2e
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>pip<span class=w> </span>install<span class=w> </span>-r<span class=w> </span>requirements.txt
</span></code></pre></div> <ul> <li>Run the happy path tests:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nb>cd</span><span class=w> </span>e2e
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>python<span class=w> </span>non_regression_tests.py
</span></code></pre></div> <h3 id=maintenance-activities-for-the-demonstration>Maintenance activities for the demonstration<a class=headerlink href=#maintenance-activities-for-the-demonstration title="Permanent link">Â¶</a></h3> <ul> <li>It may be relevant to reset the vector store database. To do so, delete the folder with the data content. </li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nb>cd</span><span class=w> </span>IBU-insurance-demo/deployment/local
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>rm<span class=w> </span>-r<span class=w> </span>data/chromadb
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>rm<span class=w> </span>-r<span class=w> </span>data/file_content
</span></code></pre></div> <ul> <li>Restarting the owl-backend. As of now as the backend does not use a database, it loads Owl Entity definitions from file manifests. So sometime it is needed to restart the server using the following commands:</li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nb>cd</span><span class=w> </span>IBU-insurance-demo/deployment/local
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>docker<span class=w> </span>stop<span class=w> </span>owl-backend
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>docker-compose<span class=w> </span>up<span class=w> </span>-d<span class=w>   </span><span class=c1># should restart only the owl-backend</span>
</span></code></pre></div> <h2 id=architecture>Architecture<a class=headerlink href=#architecture title="Permanent link">Â¶</a></h2> <p>The high level the architecture for this demonstration looks like in the following figure:</p> <p><img alt src=../diagrams/insurance/hl-arch.drawio.png width=800></p> <ul> <li>A chatbot supports the interactions in natural language queries</li> <li>The assistant server manages the conversation and the integration with the different backends. There are two assistants defined for this demonstration, one using IBM ODM decision service, one without it. </li> </ul> <h2 id=component-definitions>Component Definitions<a class=headerlink href=#component-definitions title="Permanent link">Â¶</a></h2> <h3 id=define-the-assistant>Define The Assistant<a class=headerlink href=#define-the-assistant title="Permanent link">Â¶</a></h3> <p>The assistant needs to do different operations to address queries in the insurance domain. The flow is introduced in the following diagram and implemented using LangGraph API:</p> <p><img alt src=../diagrams/insurance/assistant_lg_tool_flow.drawio.png width=900></p> <p><em>The code supporting this graph is in the <a href=https://github.com/AthenaDecisionSystems/athena-owl-demos/blob/main/IBU-insurance-demo/ibu_backend/src/ibu/llm/assistants/IBU_Assistant_LG.py>IBU_Assistant_LG.py</a> and uses LangGraph API</em></p> <ul> <li>The first agent, <code>ibu_classify_query_agent</code>, has a system prompt to assess if the query is about an information query or about a complaint related to an insurance entity. The tools used to support both paths are not the same. The system prompt is <code>classify_query_prompt</code>. The agent is <code>ibu_classify_query_agent</code></li> </ul> <div class="language-python highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=n>graph</span><span class=o>.</span><span class=n>add_node</span><span class=p>(</span><span class=s2>"gather_information"</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>process_information_query</span><span class=p>)</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=n>graph</span><span class=o>.</span><span class=n>add_node</span><span class=p>(</span><span class=s2>"process_complaint"</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>process_complaint</span><span class=p>)</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=n>graph</span><span class=o>.</span><span class=n>add_node</span><span class=p>(</span><span class=s2>"activate_tools_for_info"</span><span class=p>,</span> <span class=n>tool_node_1</span><span class=p>)</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=n>graph</span><span class=o>.</span><span class=n>add_node</span><span class=p>(</span><span class=s2>"activate_tools_for_complaint"</span><span class=p>,</span> <span class=n>tool_node_2</span><span class=p>)</span>
</span></code></pre></div> <ul> <li> <p>The gathering information agent is using a prompt to search for information, using query tools to claim or client databases and then external web search. The agent is <code>ibu_tool_rag_agent_limited</code>.</p> </li> <li> <p>The complaint processing agent is <code>ibu_tool_rag_agent</code>.</p> </li> <li>The active tool nodes are taking the output for the LLM to assess the tool selections and then execute those tools, accumulates the responses to send them back to the matching agent. The tool lists are different in each agent:</li> </ul> <div class="language-yaml highlight"><span class=filename>agents.yaml file in config folder</span><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=nt>ibu_tool_rag_agent_limited</span><span class=p>:</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>  </span><span class=nt>agent_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_tool_rag_agent_limited</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>  </span><span class=nt>tools</span><span class=p>:</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_client_by_id</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_client_by_name</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_claim_by_id</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tavily</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=c1># </span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=nt>ibu_tool_rag_agent</span><span class=p>:</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a><span class=w>   </span><span class=nt>agent_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_tool_rag_agent</span>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=w>   </span><span class=nt>tools</span><span class=p>:</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_best_action</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_client_by_id</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_client_by_name</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_claim_by_id</span>
</span></code></pre></div> <p>To navigate in the graph conditions are added to the edges:</p> <div class="language-py highlight"><span class=filename>conditonal edge in IBU_Assistant_LG.py</span><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1># from the gathering information node, if there is a tool call in the response then goes to activate the tools</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a> <span class=n>graph</span><span class=o>.</span><span class=n>add_conditional_edges</span><span class=p>(</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>    <span class=s2>"gather_information"</span><span class=p>,</span>  <span class=c1># (1)</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>    <span class=bp>self</span><span class=o>.</span><span class=n>route_tools</span><span class=p>,</span>      <span class=c1># (2)</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>    <span class=p>{</span> 
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>        <span class=s2>"tools"</span><span class=p>:</span> <span class=s2>"activate_tools_for_info"</span><span class=p>,</span> 
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>        <span class=n>END</span><span class=p>:</span> <span class=n>END</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>    <span class=p>}</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a> <span class=p>)</span>
</span></code></pre></div> <ol> <li><img alt=ðŸ™‹â€â™‚ï¸ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f64b-200d-2642-fe0f.svg title=:man_raising_hand:> The node with LLM</li> <li><img alt=ðŸ™‹â€â™‚ï¸ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f64b-200d-2642-fe0f.svg title=:man_raising_hand:> The function to decide where to route</li> </ol> <p>The route tools function looks at the present of tool_calls in the LLM ai message response:</p> <div class="language-py highlight"><span class=filename>route_tools function</span><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a> <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>ai_message</span><span class=p>,</span> <span class=s2>"tool_calls"</span><span class=p>)</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>ai_message</span><span class=o>.</span><span class=n>tool_calls</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></code></pre></div> <h3 id=define-agents>Define Agents<a class=headerlink href=#define-agents title="Permanent link">Â¶</a></h3> <h4 id=ibu_classify_query_agent>ibu_classify_query_agent<a class=headerlink href=#ibu_classify_query_agent title="Permanent link">Â¶</a></h4> <p>The first agent declaration uses the <a href=https://github.com/AthenaDecisionSystems/athena-owl-demos/blob/main/IBU-insurance-demo/ibu_backend/src/ibu/llm/agents/ClassifyQueryAgent.py><code>IBUClassifyQueryAgent</code></a> class.</p> <div class="language-yaml highlight"><span class=filename>File ibu_backend/src/config/agents.yaml</span><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=nt>ibu_classify_query_agent</span><span class=p>:</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>  </span><span class=nt>agent_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_classify_query_agent</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_classify_query_agent</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">openai based agent with simple prompt</span><span class=w> </span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>  </span><span class=nt>class_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu.llm.agents.ClassifyQueryAgent.IBUClassifyQueryAgent</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>  </span><span class=nt>modelClassName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">langchain_openai.ChatOpenAI</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>  </span><span class=nt>modelName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gpt-3.5-turbo-0125</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=w>  </span><span class=nt>prompt_ref</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">classify_query_prompt</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=w>  </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=w>  </span><span class=nt>top_k</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=w>  </span><span class=nt>top_p</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span></code></pre></div> <h4 id=ibu_tool_rag_agent>ibu_tool_rag_agent<a class=headerlink href=#ibu_tool_rag_agent title="Permanent link">Â¶</a></h4> <p>To illustrate the integration with Vector Store a specific agent: <a href=https://github.com/AthenaDecisionSystems/athena-owl-demos/blob/main/IBU-insurance-demo/ibu_backend/src/ibu/llm/agents/tool_rag_agent.py>tool_rag_agent</a> is defined.</p> <div class="language-yaml highlight"><span class=filename>File ibu_backend/src/config/agents.yaml</span><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=nt>ibu_tool_rag_agent</span><span class=p>:</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=w>  </span><span class=nt>agent_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_tool_rag_agent</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_tool_rag_agent</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">openai based agent with prompt with query and context</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>  </span><span class=nt>class_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu.llm.agents.tool_rag_agent.IbuToolRagAgent</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=w>  </span><span class=nt>modelClassName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">langchain_openai.ChatOpenAI</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=w>  </span><span class=nt>modelName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gpt-3.5-turbo-0125</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=w>  </span><span class=nt>prompt_ref</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_rag_prompt</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=w>  </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=w>  </span><span class=nt>top_k</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=w>  </span><span class=nt>top_p</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=w>  </span><span class=nt>tools</span><span class=p>:</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_best_action</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_client_by_id</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_client_by_name</span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">get_claim_status_by_user_name</span>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_claim_by_id</span>
</span></code></pre></div> <h4 id=ibu_tool_rag_agent_limited>ibu_tool_rag_agent_limited<a class=headerlink href=#ibu_tool_rag_agent_limited title="Permanent link">Â¶</a></h4> <p>Using the same code as above but with other tools.</p> <div class="language-yaml highlight"><span class=filename>File ibu_backend/src/config/agents.yaml</span><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=nt>ibu_tool_rag_agent_limited</span><span class=p>:</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=w>  </span><span class=nt>agent_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_tool_rag_agent_limited</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">OpenAI IBU agent with RAG Limited</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">OpenAI IBU agent with RAG and insurance tool without decision service</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=w>  </span><span class=nt>class_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu.llm.agents.tool_rag_agent.IbuToolRagAgent</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=w>  </span><span class=nt>modelClassName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">langchain_openai.ChatOpenAI</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=w>  </span><span class=nt>modelName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gpt-3.5-turbo-0125</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=w>  </span><span class=nt>prompt_ref</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_rag_prompt</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=w>  </span><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=w>  </span><span class=nt>top_k</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=w>  </span><span class=nt>top_p</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=w>  </span><span class=nt>tools</span><span class=p>:</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_client_by_id</span>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_client_by_name</span>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">get_claim_status_by_user_name</span>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_claim_by_id</span>
</span><span id=__span-17-17><a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tavily</span>
</span></code></pre></div> <h3 id=define-tools>Define Tools<a class=headerlink href=#define-tools title="Permanent link">Â¶</a></h3> <p>This is one of the most important exercise. The tools are functions and declarations in manifest file. </p> <p>The get client information by using the first and last names is a function that uses a HTTP client to call the DataManager microservice, using the repository pattern:</p> <div class="language-py highlight"><span class=filename>client_tools.py</span><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=k>def</span> <span class=nf>get_client_by_name</span><span class=p>(</span><span class=n>firstname</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>lastname</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=w>    </span><span class=sd>"""get client information given his or her name"""</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>    <span class=k>return</span> <span class=n>build_or_get_insurance_client_repo</span><span class=p>()</span><span class=o>.</span><span class=n>get_client_by_name</span><span class=p>(</span><span class=n>firstname</span><span class=p>,</span> <span class=n>lastname</span><span class=p>)</span>
</span></code></pre></div> <p>The repository is a Singleton. </p> <div class="language-yaml highlight"><span class=filename>Declaration in config/tools.yaml</span><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=nt>ibu_client_by_name</span><span class=p>:</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=w>  </span><span class=nt>tool_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_client_by_name</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=w>  </span><span class=nt>tool_name</span><span class=p>:</span><span class=w> </span><span class=s>"Client</span><span class=nv> </span><span class=s>by</span><span class=nv> </span><span class=s>lastname</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>firstname"</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=w>  </span><span class=nt>tool_class_name</span><span class=p>:</span><span class=w> </span><span class=s>'ibu.llm.tools.client_tools'</span><span class=w>  </span><span class=c1># (1)</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=w>  </span><span class=nt>tool_description</span><span class=p>:</span><span class=w> </span><span class=s>'get</span><span class=nv> </span><span class=s>client</span><span class=nv> </span><span class=s>information</span><span class=nv> </span><span class=s>given</span><span class=nv> </span><span class=s>his</span><span class=nv> </span><span class=s>or</span><span class=nv> </span><span class=s>her</span><span class=nv> </span><span class=s>lastname</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>firstname'</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=w>  </span><span class=nt>tool_fct_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">get_client_by_name</span>
</span></code></pre></div> <ol> <li>The module file name where the function is implemented</li> </ol> <h3 id=define-instructions>Define instructions<a class=headerlink href=#define-instructions title="Permanent link">Â¶</a></h3> <p>System prompts are defined externally in the prompts.yaml and then referenced in the agent:</p> <div class="language-yaml highlight"><span class=filename>IBU Classify Query Agent in agents.yaml</span><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=nt>ibu_classify_query_agent</span><span class=p>:</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=w>  </span><span class=nt>agent_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibu_classify_query_agent</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IBU Classify Query Agent</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=w>  </span><span class=nt>prompt_ref</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">classify_query_prompt</span><span class=w>  </span><span class=c1># (1)</span>
</span></code></pre></div> <ol> <li>Reference to a system prompt.</li> </ol> <p>The matching prompt:</p> <div class="language-yaml highlight"><span class=filename>Classify the query instructions in prompts.yaml</span><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=nt>classify_query_prompt</span><span class=p>:</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=w>  </span><span class=nt>prompt_id</span><span class=p>:</span><span class=w>  </span><span class="l l-Scalar l-Scalar-Plain">classify_query_prompt</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Classify the query instructions</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>  </span><span class=nt>locales</span><span class=p>:</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>locale</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">en</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>    </span><span class=nt>text</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">&gt;</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>      </span><span class=no>"You are an expert at extracting intent from user question. Assess if this is a complaint or an information gathering query.</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>        </span><span class=no>The information contains documents related to insurance policies, claim, coverages.</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=w>        </span><span class=no>Use complaint for questions on insurance claim status or reimbursement or unhappy customer. Only return information or complaint."</span>
</span></code></pre></div> <h2 id=development-activities>Development activities<a class=headerlink href=#development-activities title="Permanent link">Â¶</a></h2> <h3 id=prepare-a-virtual-environment>Prepare a virtual environment<a class=headerlink href=#prepare-a-virtual-environment title="Permanent link">Â¶</a></h3> <div class="language-sh highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>python<span class=w> </span>-m<span class=w> </span>venv<span class=w> </span>.venv
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=c1># for MAC / Linux users</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=nb>source</span><span class=w> </span>./venv/bin/activate
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=c1># for Windows</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=nb>source</span><span class=w> </span>./venv/Scripts/activate
</span></code></pre></div> <p>To run unit tests or integration tests, once the Python virtual environment is started be sure to set the PYTHONPATH environment variable so the athena core module can be found:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=c1># under ibu_backend</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=nb>source</span><span class=w> </span>setpython.sh
</span></code></pre></div> <h3 id=run-unit-tests>Run unit tests<a class=headerlink href=#run-unit-tests title="Permanent link">Â¶</a></h3> <p>All the unit tests are defined with Python <a href=https://docs.python.org/3/library/unittest.html>unittests</a> library.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=c1># under ibu_backend</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>pytest<span class=w> </span>-s<span class=w> </span>tests/ut/
</span></code></pre></div> <h3 id=debug-a-unit-tests>Debug a unit tests<a class=headerlink href=#debug-a-unit-tests title="Permanent link">Â¶</a></h3> <p>The following instructions are for VScode:</p> <ul> <li>Select the test class as the python file to execute</li> <li> <p>Start the debug and verify the launch configuration includes:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=nt>"configurations"</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=w>        </span><span class=nt>"name"</span><span class=p>:</span><span class=w> </span><span class=s2>"Python Debugger: Current File Demos"</span><span class=p>,</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=w>        </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"debugpy"</span><span class=p>,</span>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a><span class=w>        </span><span class=nt>"request"</span><span class=p>:</span><span class=w> </span><span class=s2>"launch"</span><span class=p>,</span>
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a><span class=w>        </span><span class=nt>"program"</span><span class=p>:</span><span class=w> </span><span class=s2>"${file}"</span><span class=p>,</span>
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a><span class=w>        </span><span class=nt>"console"</span><span class=p>:</span><span class=w> </span><span class=s2>"integratedTerminal"</span><span class=p>,</span>
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a><span class=w>        </span><span class=nt>"env"</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nt>"PYTHONPATH"</span><span class=p>:</span><span class=w> </span><span class=s2>"${workspaceRoot}/../athena-owl-core/owl-agent-backend/src"</span><span class=p>},</span>
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a><span class=w>        </span><span class=nt>"cwd"</span><span class=p>:</span><span class=w> </span><span class=s2>"${workspaceRoot}/IBU-insurance-demo/ibu_backend"</span>
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-25-12><a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a><span class=p>]</span>
</span></code></pre></div> </li> </ul> <h3 id=physical-deployment-of-the-demonstration>Physical deployment of the demonstration<a class=headerlink href=#physical-deployment-of-the-demonstration title="Permanent link">Â¶</a></h3> <p>As of now the owl-backend is a container image, deployable as a unit and being able to mount the python code of the demonstration to run the different orchestration logic. The diagram illustrates those concepts to run on a local machine with the data manager microservice running in its own container</p> <p><img alt src=../diagrams/insurance/ibu_local_deploy.drawio.png width=800></p> <p>For production deployment the owl-backend code and the specific logic may be packaged in its own container.</p></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../tutorials/dev_env/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Environment Setup"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Environment Setup </div> </div> </a> <a href=../miniloan/ class="md-footer__link md-footer__link--next" aria-label="Next: IBM-ODM LoanApp"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> IBM-ODM LoanApp </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 Athena Decision Systems </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/AthenaDecisionSystems target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.linkedin.com/company/athena-decision-systems/ target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "search.highlight", "navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.tracking", "navigation.top", "navigation.footer"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.83f73b43.min.js></script> </body> </html>